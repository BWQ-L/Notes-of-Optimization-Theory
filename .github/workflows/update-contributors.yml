name: âœ¨ Update Contributors Graph

on:
  schedule:
    - cron: '0 2 * * *'  # æ¯å¤©å‡Œæ™¨ 2 ç‚¹ UTC è‡ªåŠ¨è¿è¡Œï¼ˆå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰
  push:
    branches:
      - main  # æ›¿æ¢ä¸ºä½ çš„é»˜è®¤åˆ†æ”¯
  pull_request:
    types: [closed]

jobs:
  update-contributors:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v3

      - name: ğŸ§¾ Generate Contributors Graph
        uses: akhilmhdh/contributors-readme-action@v2.3.10
        with:
          image_size: 96                     # æ›´ç»†è‡´çš„å¤´åƒå°ºå¯¸
          columns_per_row: 7                # æ¯è¡Œæ˜¾ç¤º 7 ä¸ªå¤´åƒ
          readme_path: 'README.md'          # å¯æ”¹ä¸ºå…¶ä»–è·¯å¾„
          commit_message: 'docs: update contributors graph'
          committer_username: 'github-actions[bot]'
          committer_email: '41898282+github-actions[bot]@users.noreply.github.com'
          silent: true                      # æ²¡æœ‰å˜æ›´æ—¶ä¸åˆ›å»ºæäº¤
          use_username: true                # æ˜¾ç¤ºç”¨æˆ·åï¼ˆå¤´åƒä¸‹æ–¹ï¼‰

      - name: ğŸ“¤ Push Changes
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git diff --quiet || git commit -am "docs: update contributors graph" && git push
